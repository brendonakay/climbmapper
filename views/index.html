<!DOCTYPE html>
<html>
  <head>
    <title>{{ title }}</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    
    <link rel="stylesheet" type="text/css" href="javascripts/leaflet_0_7_3/leaflet.css"/>
    <link rel="stylesheet" type="text/css" href="javascripts/leaflet_draw_0_2_4/dist/leaflet.draw.css"/>
	 <link rel="stylesheet" type="text/css" href="/stylesheets/all.css" />
	 <link rel="stylesheet" href="//code.jquery.com/ui/1.11.3/themes/smoothness/jquery-ui.css">
	 <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">


  	 <script type="text/javascript" src="javascripts/leaflet_0_7_3/leaflet-src.js"></script>
    <script src="javascripts/leaflet-providers-master/leaflet-providers.js"></script>
    <script src="javascripts/leaflet-omnivore-master/leaflet-omnivore.min.js"></script>
    <script type="text/javascript" src="javascripts/leaflet_draw_0_2_4/dist/leaflet.draw.js"></script>

    <script type="text/javascript" src="javascripts/jquery-2.1.3.min.js"></script>
    <script src="//code.jquery.com/ui/1.11.3/jquery-ui.js"></script>
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="javascripts/typeahead/typeahead.bundle.min.js"></script>

    
  
    <script src="http://d3js.org/d3.v3.min.js"></script>

    <script src="javascripts/map.js" ></script>
    <script src="javascripts/PieChart.js" ></script>
     <script src="javascripts/RouteHeightPieChart.js" ></script>
    <script src="javascripts/BarChart.js" ></script>
    <script src="javascripts/LineChart.js" ></script>
    
    <script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		
		  ga('create', 'UA-69458559-1', 'auto');
		  ga('send', 'pageview');
		
	 </script>
  </head>
  
	<body>
	
		<div id="app-config-el" style="display:none;" data-isauthenticated="{{isAuthenticated}}" data-authenticateduserid="{{authenticatedUserId}}"></div>
		
	    <div class="navbar navbar-custom navbar-fixed-top">
			 <div class="navbar-header"></div>
		    <div class="navbar-collapse collapse">
		      <ul class="nav navbar-nav">
		        <li class="active" data-toggle="modal" data-target="#about-modal"><a href="#">About</a></li>
		        <li>&nbsp;</li>
				  {{#isNOTAuthenticated}}
		        		<li class="active"><a href="/signup">Sign Up</a></li>
		        		<li>&nbsp;</li>
		        		<li class="active"><a href="/login">Login</a></li>
		        		<li>&nbsp;</li>
		        {{/isNOTAuthenticated}}
		        
		        {{#isAuthenticated}}
		        		<li class="active"><a href="/profile">Your Profile</a></li>
		        		<li>&nbsp;</li>
		        		<li class="active" data-toggle="modal" data-target="#issues-modal"><a href="#">Your Data Issues</a></li>
		        {{/isAuthenticated}}	        
		      </ul>
		      
		      <div id="user-name-container">
					<h3>{{username}}</h3>		    		
		    	</div>
 
		      <form class="navbar-form">
		        <div class="form-group" style="display:inline;">
		          <div id="area-search" class="input-group pull-right">
		            <input type="text" class="typeahead form-control" placeholder="Search for a crag/area">
		            <span class="input-group-addon"><span class="glyphicon glyphicon-search"></span> </span>
		          </div>
		        </div>
		      </form>
		    </div>
		</div>
	
	   <div class="container" id="main">
		  <div class="row" style="">
		  	<div class="col-xs-6 col-lg-4" id="left-sidebar" style="">
		    	<div id="left-sidebar-heading-info-container">
		      	<h2 id="left-sidebar-heading" class="text-center"></h2>
		      	<!--<hr> --> 
		      
		      	<div id="hover-text-info-container"></div>
		      </div>
				
				<div id="chart-row-2" class="row chart-row" style="display:none;"></div>
				<div id="chart-row-1" class="row chart-row" style="display:none;"></div>
				
				<div class="row slider-row">
					<div id="tick-slider">
						<div id="time-slider-label-container">
							<p id="time-slider-label"><p>
						</div>
					</div>
				</div>
		    </div>
		    <div class="col-xs-12 col-sm-6 col-lg-8 right-main-panel">
		    	<div class="row">
<!--		    		<div id="user-name-container">
						<h3>{{username}}</h3>		    		
		    		</div>-->
			    	<div id="info-container" style="display:none;" >
				   	<h4 id='info-area-title'></h4>
				   	<div id="info-box">
							<div id="click-chart-panel"></div>	   	
				   	</div>
				   </div>
				 </div>
		    </div>		 
		  </div>
		  <div id="map"></div>  
		  
		  
		  <!-- About Modal -->
		  <div class="modal fade" id="about-modal" role="dialog">
		    <div class="modal-dialog">
		    
		      <!-- Modal content-->
		      <div class="modal-content">
		        <div class="modal-header">
		          <button type="button" class="close" data-dismiss="modal">&times;</button>
		          <h4 class="modal-title">About Climb Mapper</h4>
		        </div>
		        <div class="modal-body">
		          <div>  
			    			<p>Climb Mapper seeks to provide planning and analysis for users of Mountain Project. 
			    				After signing up and uploading your Mounatin Project data the application displays climbing areas sized by the number of your Mountain Project Ticks and ToDos. 
			    				Charts are used throughout to display the breakdown of climb rating (using YDS), type (ex: boulder, sport, traditional) by area, and height (in pitches).
			    				In addition to visualizing your existing data, logged-in users have the ability to add and edit climbing areas in the system to help better map Mountain Project Tick/ToDo data against Climb Mapper climbing areas.
			    				This is an experiment and side project and so any collaboration is welcome. 
			    				All the scrapy code is available on <a href="https://github.com/justinlewis/climbmapper" target="_blank">one of my GitHub repos</a>.		
			    			</p>
			    		</div>
			    		<div>
			    			<h4>About The Data</h4>	 
			    			<p>All route data (Ticks and ToDos) are imported from <a href="http://www.mountainproject.com/" target="_blank">Mountain Project</a>. 
			    			All climbing area data is created by Climb Mapper users independent of Mountain Project. 
			    			All user submitted data will be open sourced for other applications to use in hopes that a common data source openly shared will benefit other future applications that help engage in this sport we love so much.
			    			</p>
			    		</div>
			    		<div>
			    			<h4>An Important Caveat</h4>	 
			    			<ul>
			    				<li>Mountain Project data is NOT available with geometrically based location data. 
			    					Instead the application attempts to assign routes to climbing areas based on name matching.
			    					This is problematic because it means that climbing areas in Climb Mapper must grammatically match a name in the location hierarchy of a route on Mountain Project.
			    					For example, if a route on Mountain Project has a location hierarchy (found at top of page) like this "All Locations > California > Yosemite National Park > Tuolumne Meadows > Cathedral Range > Cathedral Peak" then an area in Climb Mapper must exist that has one of those names between the ">" symbols (i.e. Yosemite National Park).
			    					If there these location names do not match up the route will not be matched to an area in Climb Mapper. 
			    				</li>
			    			</ul>
			    		</div>
			    		<div>
			    			<h4>About The Technology Used</h4>	 
			    			<p>
			    				The application is built on PostgreSQL/PostGIS, Node.js, Leaflet.js, D3.js, Bootstrap, and JQuery. 
			    				Needless to say there is a lot of JavaScript used for presentation and a little Python for data extraction/processing.
			    			</p>
			    		</div>
			    		<div>
			    			<h4>Future Plans</h4>	  
			    			<p>
			    				Because this is an experiment you can expect the visualizations to get better and more interesting. 
								More details and implementation specifics can be found at the <a href="https://github.com/justinlewis/climbmapper" target="_blank">public GitHub repo</a> where anyone can submit issue or request tickets.
			    			</p> 
			    		</div>
			    		<div>
							<h4>About Me</h4>	  
							<p>I am a software developer with a particular interest in geography and web visualization. 
								I have been climbing for a long time and this application serves as a junction between the real and the digital. 
								You can find me on <a href="https://twitter.com/jmapping" target="_blank">Twitter @jmapping</a>
							</p>  
						</div>
		        </div>
		        <div class="modal-footer">
		          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		        </div>
		      </div>
		      
		    </div>
		  </div>
		  
		  <div class="modal fade" id="issues-modal" role="dialog">
		    <div class="modal-dialog">
		    
		      <!-- Modal content-->
		      <div class="modal-content">
		        <div class="modal-header">
		          <button type="button" class="close" data-dismiss="modal">&times;</button>
		          <h4 class="modal-title">Known Issues</h4>
		        </div>
		        <div class="modal-body">

						<div id="issues-content"></div>			    		
			    		
		        </div>
		        <div class="modal-footer">
		          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		        </div>
		      </div>
		      
		    </div>
		  </div>
		  
		  
	  </div> <!-- end main -->

	</body>
</html>
